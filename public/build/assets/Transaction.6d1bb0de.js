import{j as m,F as g,a as e,u as _,H as x}from"./app.425b1fac.js";import{A as w,H as v}from"./Header.6b547574.js";import{P as A}from"./PrimaryButton.b0614614.js";import{T as I,I as C}from"./TextInput.fc2702f4.js";import{I as k}from"./InputLabel.f55227c9.js";const i=({label:a,name:r,type:t,value:c,onHandleChange:h,errors:o,labelClass:n,InputClass:p,ErrorClass:f,disabled:y})=>m(g,{children:[e(k,{forInput:r,ty:!0,value:a}),e(I,{type:t||"text",name:r,value:c,className:"mt-1 block  "+p+(o.name?" border-red-500":" "),handleChange:h,disabled:y}),e(C,{message:o.name,className:"mt-2"})]});function b({room:a,type:r}){const{data:t,setData:c,post:h,processing:o,errors:n,transform:p,reset:f,clearErrors:y}=_({name:"",email:"",phone:"",date:r!="ADVANCE"?a.next_month._date.toString().substr(0,10):"",remark:"",electricity_units:a.initial_electricity_units,electricity_consumed:0,recurring_charges:a.recurring_charges,rent:r=="VACANT"?0:a.rental,total:a.recurring_charges+(r=="VACANT"?0:a.rental),type:r}),s=l=>{console.log(l.target.name);let d=isNaN(parseInt(l.target.value))?0:parseInt(l.target.value);if(l.target.name=="electricity_units"){let u=l.target.value-a.initial_electricity_units,N=t.recurring_charges+t.rent+(isNaN(u)?0:u)*parseInt(a.electricity_unit_rate);c({...t,total:N,electricity_consumed:u,electricity_units:l.target.value})}else if(l.target.name=="recurring_charges"){let u=(isNaN(d)?0:d)+t.rent+t.electricity_consumed*parseInt(a.electricity_unit_rate);c({...t,total:u,recurring_charges:d})}else if(l.target.name=="rent"){let u=t.recurring_charges+(isNaN(d)?0:d)+t.electricity_consumed*parseInt(a.electricity_unit_rate);c({...t,total:u,rent:d})}else c(l.target.name,l.target.type==="checkbox"?l.target.checked:l.target.value)};return e(g,{children:e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg px-4 py-4",children:m("form",{onSubmit:l=>{l.preventDefault(),console.log(t),h(route("rooms.transaction.store",a.id))},children:[e("h3",{className:"mb-4",children:"Create And Assign Tenant"}),r=="ADVANCE"&&m(g,{children:[m("div",{className:"mb-4 flex ",children:[e("div",{className:"mr-1 md:w-full",children:e(i,{type:"text",label:"Name",name:"name",value:t.name,onHandleChange:s,errors:n})}),e("div",{className:"ml-1 md:w-full",children:e(i,{type:"text",label:"Phone Number",name:"phone",value:t.phone,onHandleChange:s,errors:n})})]}),m("div",{className:"mb-4 flex ",children:[e("div",{className:"mr-1 md:w-full",children:e(i,{type:"email",label:"Email",name:"email",value:t.email,onHandleChange:s,errors:n})}),e("div",{className:"ml-1 md:w-full ",children:e(i,{type:"date",label:"Rental Date",name:"date",value:t.date,onHandleChange:s,errors:n})})]})]}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(i,{type:"number",label:"Starting Electricity Units In Meter:",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"electricity_units",value:t.electricity_units,onHandleChange:s,errors:n})}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(i,{type:"number",label:"Electricity Consumed:",disabled:!0,InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"electricity_consumed",value:t.electricity_consumed,onHandleChange:s,errors:n})}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(i,{type:"number",label:"Recurring Charges:",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"recurring_charges",value:t.recurring_charges,onHandleChange:s,errors:n})}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(i,{type:"number",label:"Basic Rent:",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"rent",value:t.rent,onHandleChange:s,errors:n})}),e("div",{children:m("h1",{className:"text-right flex justify-between uppercase",children:[e("span",{children:"Total Rent:"})," ",m("span",{className:"font-extrabold",children:["\u20B9",t.total]})]})}),e("div",{className:"mt-4",children:e(i,{type:"text",label:"Remark (optional):",InputClass:"w-full",name:"remark",value:t.remark,onHandleChange:s,errors:n})}),e("div",{className:"mt-4",children:e(A,{processing:o,children:"SUBMIT"})})]})})})}function S(a){const{room:r,vacant:t}=a,c=()=>t==!0?e(b,{room:r,type:"VACANT"}):r.tenant?e(b,{room:r,type:"REGULAR"}):e(b,{room:r,type:"ADVANCE"});return m(w,{auth:a.auth,errors:a.errors,header:e(v,{back:route("property.rooms.index",r.property_id),title:t?"Vacant":r.tenant?"Submit Rent":"Assign Tenant"}),children:[e(x,{title:t?"Vacant":r.tenant?"Submit Rent":"Assign Tenant"}),e("div",{className:"py-1",children:e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 sm:py-6 lg:py-8",children:e(c,{})})})]})}export{S as default};
