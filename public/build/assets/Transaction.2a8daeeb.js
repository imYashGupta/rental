import{j as m,F as o,a as e,u as x,H as N}from"./app.b836389d.js";import{A as w,H as C}from"./Header.a2e9e2f2.js";import{P as v}from"./PrimaryButton.38633f0c.js";import{T as A,I}from"./TextInput.794e1b25.js";import{I as k}from"./InputLabel.9dd1433e.js";import"./XMarkIcon.c2be73d2.js";const i=a=>{const{label:l,name:t,type:c,value:b,onHandleChange:h,errors:n,labelClass:y,InputClass:p,ErrorClass:_}=a;return m(o,{children:[e(k,{forInput:t,ty:!0,value:l}),e(A,{type:c||"text",name:t,value:b,className:"mt-1 block  "+p+(n.name?" border-red-500":" "),handleChange:h,...a}),e(I,{message:n.name,className:"mt-2"})]})};function g({room:a,type:l}){console.log(a);const{data:t,setData:c,post:b,processing:h,errors:n,transform:y,reset:p,clearErrors:_}=x({name:"",email:"",phone:"",date:l!="ADVANCE"?a.next_month._date.toString().substr(0,10):"",remark:"",electricity_units:a.initial_electricity_units,electricity_consumed:0,recurring_charges:a.recurring_charges,rent:l=="VACANT"?0:a.rental,total:a.recurring_charges+(l=="VACANT"?0:a.rental),type:l,balance:a.balance,amount_collected:a.balance+a.recurring_charges+(l=="VACANT"?0:a.rental)}),s=r=>{console.log(r.target.name);let d=isNaN(parseInt(r.target.value))?0:parseInt(r.target.value);if(r.target.name=="electricity_units"){let u=r.target.value-a.initial_electricity_units,f=t.recurring_charges+t.rent+(isNaN(u)?0:u)*parseInt(a.electricity_unit_rate);c({...t,total:f,electricity_consumed:u,electricity_units:r.target.value,amount_collected:f})}else if(r.target.name=="recurring_charges"){let u=(isNaN(d)?0:d)+t.rent+t.electricity_consumed*parseInt(a.electricity_unit_rate);c({...t,total:u,recurring_charges:d,amount_collected:u})}else if(r.target.name=="rent"){let u=t.recurring_charges+(isNaN(d)?0:d)+t.electricity_consumed*parseInt(a.electricity_unit_rate);c({...t,total:u,rent:d,amount_collected:u})}else r.target.name=="amount_collected"?c({...t,amount_collected:d,balance:t.total+a.balance-d}):c(r.target.name,r.target.type==="checkbox"?r.target.checked:r.target.value)};return e(o,{children:e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg px-4 py-4",children:m("form",{onSubmit:r=>{r.preventDefault(),console.log(t),b(route("rooms.transaction.store",a.id))},children:[e("h3",{className:"mb-4",children:l=="ADVANCE"?"Assign Tenant with Advanced Rent":m(o,{children:["Submit ",e("strong",{children:a.next_month.month})," Rent"]})}),l=="ADVANCE"&&m(o,{children:[m("div",{className:"mb-4 flex ",children:[e("div",{className:"mr-1 md:w-full",children:e(i,{type:"text",required:!0,label:"Name",name:"name",InputClass:"w-full",value:t.name,onHandleChange:s,errors:n})}),e("div",{className:"ml-1 md:w-full",children:e(i,{type:"text",required:!0,label:"Phone Number",InputClass:"w-full",name:"phone",value:t.phone,onHandleChange:s,errors:n})})]}),m("div",{className:"mb-4 flex ",children:[e("div",{className:"mr-1 md:w-full",children:e(i,{type:"email",required:!0,label:"Email",InputClass:"w-full",name:"email",value:t.email,onHandleChange:s,errors:n})}),e("div",{className:"ml-1 md:w-full ",children:e(i,{type:"date",required:!0,label:"Rental Date",InputClass:"w-full",name:"date",value:t.date,onHandleChange:s,errors:n})})]})]}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(i,{type:"number",min:a.initial_electricity_units,required:!0,label:l=="ADVANCE"?"Starting Electricity Units In Meter:":"Electricity Units In Meter",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"electricity_units",value:t.electricity_units,onHandleChange:s,errors:n})}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(i,{type:"number",required:!0,label:"Electricity Consumed:",disabled:!0,InputClass:"mt-1 block w-32 md:w-3/4 text-base bg-gray-200",name:"electricity_consumed",value:t.electricity_consumed,onHandleChange:s,errors:n})}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(i,{type:"number",required:!0,label:"Recurring Charges:",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"recurring_charges",value:t.recurring_charges,onHandleChange:s,errors:n})}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(i,{type:"number",required:!0,label:"Basic Rent:",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"rent",value:t.rent,onHandleChange:s,errors:n})}),e("div",{children:m("h1",{className:"text-right flex justify-between uppercase",children:[e("span",{children:"Total Rent:"})," ",m("span",{className:"font-extrabold",children:["\u20B9",t.total]})]})}),e("div",{className:"flex flex-row items-center justify-between mt-4 mb-4",children:e(i,{type:"number",disabled:!0,label:"Balance Amount",InputClass:`mt-1 block w-32 md:w-3/4 text-base ${t.balance>0&&"bg-red-100"} ${t.balance<0&&"bg-green-100"} ${t.balance==0&&"bg-gray-200"}`,name:"balance",value:t.balance,onHandleChange:s,errors:n})}),e("div",{className:"flex flex-row items-center justify-between mt-4 mb-4",children:e(i,{type:"number",required:!0,label:"Amount to be Collected:",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"amount_collected",value:t.amount_collected,onHandleChange:s,errors:n})}),e("div",{className:"mt-4",children:e(i,{type:"text",label:"Remark (optional):",InputClass:"w-full",name:"remark",value:t.remark,onHandleChange:s,errors:n})}),e("div",{className:"mt-4",children:e(v,{processing:h,children:"SUBMIT"})})]})})})}function S(a){const{room:l,vacant:t}=a,c=()=>t==!0?e(g,{room:l,type:"VACANT"}):l.tenant?e(g,{room:l,type:"REGULAR"}):e(g,{room:l,type:"ADVANCE"});return m(w,{auth:a.auth,errors:a.errors,header:e(C,{back:route("property.rooms.index",l.property_id),title:t?"Vacant":l.tenant?"Submit Rent":"Assign Tenant"}),children:[e(N,{title:t?"Vacant":l.tenant?"Submit Rent":"Assign Tenant"}),e("div",{className:"py-1",children:e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 sm:py-6 lg:py-8",children:e(c,{})})})]})}export{S as default};
