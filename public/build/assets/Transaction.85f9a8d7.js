import{u as y,a as e,j as n,F as w,H as k}from"./app.bddfa5fc.js";import{A as C}from"./AuthenticatedLayout.cb7a18bd.js";import{I as u}from"./InputLabel.2ab8ca71.js";import{T as o,I as d}from"./TextInput.22729ddf.js";import{P as v}from"./PrimaryButton.4a97dbd7.js";import"./ApplicationLogo.0518b9f7.js";function N({room:r,type:t}){console.log(r);const{data:a,setData:m,post:f,processing:s,errors:l,transform:x,reset:_,clearErrors:g}=y({electricity_consumed:0,recurring_charges:r.recurring_charges,rent:t=="VACANT"?0:r.rental,total:r.recurring_charges+(t=="VACANT"?0:r.rental),remark:"",type:t=="VACANT"?"VACANT":"REGULAR"}),b=i=>{let c=parseInt(i.target.value);if(i.target.name=="electricity_consumed"){let p=r.recurring_charges+a.rent+(isNaN(c)?0:c)*parseInt(r.electricity_unit_rate);m({...a,total:p,electricity_consumed:c})}if(i.target.name=="recurring_charges"){let p=(isNaN(c)?0:c)+a.rent+a.electricity_consumed*parseInt(r.electricity_unit_rate);m({...a,total:p,recurring_charges:c})}if(i.target.name=="rent"){let p=a.recurring_charges+(isNaN(c)?0:c)+a.electricity_consumed*parseInt(r.electricity_unit_rate);m({...a,total:p,rent:c})}};return e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg px-4 py-4",children:e("form",{onSubmit:i=>{i.preventDefault(),f(route("rooms.transaction.store",r.id))},children:n("div",{children:[e("div",{className:"flex justify-between"}),n("div",{className:"flex flex-row items-center justify-between mb-4",children:[e(u,{forInput:"electricity_consumed",value:"Electricity Units Consumed:",className:"text-base "}),e(o,{type:"number",name:"electricity_consumed",min:0,value:a.electricity_consumed,className:"mt-1 block w-32 md:w-3/4 text-base"+(l.electricity_consumed?"border-red-500":" "),handleChange:b}),e(d,{message:l.electricity_consumed,className:"mt-2"})]}),n("div",{className:"flex flex-row items-center justify-between mb-4",children:[e(u,{forInput:"recurring_charges",value:"Recurring Charges:",className:"text-base"}),e(o,{type:"number",name:"recurring_charges",value:a.recurring_charges,className:"mt-1 block w-32 md:w-3/4  "+(l.recurring_charges?"border-red-500":" "),handleChange:b}),e(d,{message:l.recurring_charges,className:"mt-2"})]}),n("div",{className:"flex flex-row items-center justify-between mb-4",children:[e(u,{forInput:"recurring_charges",value:"Basic Rent:",className:"text-base"}),e(o,{type:"number",name:"rent",value:a.rent,className:"mt-1 block w-32 md:w-3/4  "+(l.rent?"border-red-500":" "),handleChange:b}),e(d,{message:l.rent,className:"mt-2"})]}),e("div",{children:n("h1",{className:"text-right flex justify-between uppercase",children:[e("span",{children:"Total Rent:"})," ",n("span",{className:"font-extrabold",children:["\u20B9",a.total]})]})}),n("div",{className:"mt-4",children:[e(u,{forInput:"remark",value:"Remark (optional)"}),e(o,{type:"text",name:"remark",value:a.remark,className:"mt-1 block w-full "+(l.remark?"border-red-500":" "),handleChange:i=>m("remark",i.target.value)}),e(d,{message:l.remark,className:"mt-2"})]}),e("div",{children:e(v,{className:"mt-6 float-right",processing:s,children:"Submit"})})]})})})}function A({room:r}){const{data:t,setData:a,post:m,processing:f,errors:s,transform:l,reset:x,clearErrors:_}=y({name:"",email:"",phone:"",remark:""}),g=h=>{a(h.target.name,h.target.type==="checkbox"?h.target.checked:h.target.value)};return e(w,{children:e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg px-4 py-4",children:n("form",{onSubmit:h=>{h.preventDefault(),m(route("rooms.transaction.store",r.id))},children:[e("h3",{className:"mb-4",children:"Create And Assign Tenant"}),n("div",{className:"mb-4",children:[e(u,{forInput:"name",value:"Name"}),e(o,{type:"text",name:"name",value:t.name,className:"mt-1 block w-full "+(s.name?"border-red-500":" "),autoComplete:"username",isFocused:!0,handleChange:g}),e(d,{message:s.name,className:"mt-2"})]}),n("div",{className:"mb-4",children:[e(u,{forInput:"phone",value:"Phone Number"}),e(o,{type:"number",name:"phone",value:t.phone,className:"mt-1 block w-full "+(s.phone?"border-red-500":" "),handleChange:g}),e(d,{message:s.phone,className:"mt-2"})]}),n("div",{className:"mb-4",children:[e(u,{forInput:"email",value:"Email"}),e(o,{type:"email",name:"email",value:t.email,className:"mt-1 block w-full",handleChange:g,required:!0}),e(d,{message:s.email,className:"mt-2"})]}),n("div",{className:"mb-4",children:[e(u,{forInput:"remark",value:"Remark (optional)"}),e(o,{type:"text",name:"remark",value:t.remark,className:"mt-1 block w-full "+(s.remark?"border-red-500":" "),handleChange:g}),e(d,{message:s.remark,className:"mt-2"})]}),e("div",{children:e(v,{processing:f,children:"Create"})})]})})})}function S(r){const{room:t,vacant:a}=r,m=()=>a==!0?e(N,{room:t,type:"VACANT"}):t.tenant?e(N,{room:t,type:"REGULAR"}):e(A,{room:t});return n(C,{auth:r.auth,errors:r.errors,header:e("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:a?"Vacant":t.tenant?"Submit Rent":"Assign Tenant"}),children:[e(k,{title:a?"Vacant":t.tenant?"Submit Rent":"Assign Tenant"}),e("div",{className:"py-12",children:e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 sm:py-6 lg:py-8",children:e(m,{})})})]})}export{S as default};
