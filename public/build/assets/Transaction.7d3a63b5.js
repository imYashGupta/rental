import{j as u,F as g,a as e,u as x,H as N}from"./app.eddb8d89.js";import{A as y}from"./AuthenticatedLayout.76699d88.js";import{P as _}from"./PrimaryButton.d27541bd.js";import{T as w,I as v}from"./TextInput.28897075.js";import{I as A}from"./InputLabel.9b58c7c5.js";import{H as C}from"./Header.1a6e21aa.js";const m=({label:a,name:r,type:t,value:i,onHandleChange:h,errors:o,labelClass:n,InputClass:f,ErrorClass:b})=>u(g,{children:[e(A,{forInput:r,ty:!0,value:a}),e(w,{type:t||"text",name:r,value:i,className:"mt-1 block w-full "+f+(o.name?" border-red-500":" "),handleChange:h}),e(v,{message:o.name,className:"mt-2"})]});function p({room:a,type:r}){const{data:t,setData:i,post:h,processing:o,errors:n,transform:f,reset:b,clearErrors:I}=x({name:"",email:"",phone:"",date:r!="ADVANCE"?a.next_month._date.toString().substr(0,10):"",remark:"",electricity_consumed:0,recurring_charges:a.recurring_charges,rent:r=="VACANT"?0:a.rental,total:a.recurring_charges+(r=="VACANT"?0:a.rental),type:r}),c=l=>{console.log(l.target.name);let s=isNaN(parseInt(l.target.value))?0:parseInt(l.target.value);if(l.target.name=="electricity_consumed"){let d=a.recurring_charges+t.rent+(isNaN(s)?0:s)*parseInt(a.electricity_unit_rate);i({...t,total:d,electricity_consumed:s})}else if(l.target.name=="recurring_charges"){let d=(isNaN(s)?0:s)+t.rent+t.electricity_consumed*parseInt(a.electricity_unit_rate);i({...t,total:d,recurring_charges:s})}else if(l.target.name=="rent"){let d=t.recurring_charges+(isNaN(s)?0:s)+t.electricity_consumed*parseInt(a.electricity_unit_rate);i({...t,total:d,rent:s})}else i(l.target.name,l.target.type==="checkbox"?l.target.checked:l.target.value)};return e(g,{children:e("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg px-4 py-4",children:u("form",{onSubmit:l=>{l.preventDefault(),console.log(t),h(route("rooms.transaction.store",a.id))},children:[e("h3",{className:"mb-4",children:"Create And Assign Tenant"}),r=="ADVANCE"&&u(g,{children:[u("div",{className:"mb-4 flex ",children:[e("div",{className:"mr-1 md:w-full",children:e(m,{type:"text",label:"Name",name:"name",value:t.name,onHandleChange:c,errors:n})}),e("div",{className:"ml-1 md:w-full",children:e(m,{type:"text",label:"Phone Number",name:"phone",value:t.phone,onHandleChange:c,errors:n})})]}),u("div",{className:"mb-4 flex ",children:[e("div",{className:"mr-1 md:w-full flex flex-1 flex-col",children:e(m,{type:"email",label:"Email",name:"email",value:t.email,onHandleChange:c,errors:n})}),e("div",{className:"ml-1 md:w-full flex flex-1 flex-col",children:e(m,{type:"date",label:"Rental Date",name:"date",value:t.date,onHandleChange:c,errors:n})})]})]}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(m,{type:"number",label:"Electricity Units Consumed:",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"electricity_consumed",value:t.electricity_consumed,onHandleChange:c,errors:n})}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(m,{type:"number",label:"Recurring Charges:",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"recurring_charges",value:t.recurring_charges,onHandleChange:c,errors:n})}),e("div",{className:"flex flex-row items-center justify-between mb-4",children:e(m,{type:"number",label:"Basic Rent:",InputClass:"mt-1 block w-32 md:w-3/4 text-base",name:"rent",value:t.rent,onHandleChange:c,errors:n})}),e("div",{children:u("h1",{className:"text-right flex justify-between uppercase",children:[e("span",{children:"Total Rent:"})," ",u("span",{className:"font-extrabold",children:["\u20B9",t.total]})]})}),e("div",{className:"mt-4",children:e(m,{type:"text",label:"Remark (optional):",name:"remark",value:t.remark,onHandleChange:c,errors:n})}),e("div",{className:"mt-4",children:e(_,{processing:o,children:"SUBMIT"})})]})})})}function H(a){const{room:r,vacant:t}=a,i=()=>t==!0?e(p,{room:r,type:"VACANT"}):r.tenant?e(p,{room:r,type:"REGULAR"}):e(p,{room:r,type:"ADVANCE"});return u(y,{auth:a.auth,errors:a.errors,header:e(C,{back:route("property.rooms.index",r.property_id),title:t?"Vacant":r.tenant?"Submit Rent":"Assign Tenant"}),children:[e(N,{title:t?"Vacant":r.tenant?"Submit Rent":"Assign Tenant"}),e("div",{className:"py-1",children:e("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 sm:py-6 lg:py-8",children:e(i,{})})})]})}export{H as default};
